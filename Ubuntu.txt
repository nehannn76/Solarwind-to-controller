bash -c 'D=ubuntu-14;P=/Orion/AgentManagement/LinuxPackageRepository.ashx?path=; dt(){ DTA=(wget curl);A=(--tries=1\ --no-check-certificate\ --read-timeout=30\ -O --insecure\ --retry\ 1\ -o); for((i=0;i<${#DTA[@]};i++));do which ${DTA[$i]}&>/dev/null&&export DT="${DTA[$i]} ${A[$i]}"&&return;done;>&2 echo "Cannot find any download tool (${DTA[*]}). Alternative URLs cannot be checked so all of them will be left enabled.";export DT=true;};dt;x(){ U=(http://mcafee:8787 http://McAFee:8787 http://192.168.1.107:8787);for u in ${U[*]};do >&2 echo -n "Checking $u "; if ${DT} /dev/null $u/ &>/dev/null;then >&2 echo "O.K."; else echo -n "# "; >&2 echo "unreachable";fi;echo "deb ${u}${P} ${D} swiagent";done;};export X=$(x);if [ -z "$X" ]; then echo Cannot find accessible URL; exit 1; fi; echo -n "URL check finished, installing repository."; if [ "$(id -u)" = "0" ]; then ESH="bash"; SWR=""; echo; else ESH="su"; SWR="switch to root and "; echo " You will prompted for root password."; fi; ${ESH} -c "echo \"$X\" > /etc/apt/sources.list.d/swiagent-${D}.list; echo \"Repository for SolarWinds agent was added. To install agent ${SWR}use following commands:\"; echo \"  apt-get update; apt-get install swiagent\""'

apt-get update; apt-get install swiagent
